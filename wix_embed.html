<!-- Video Container -->
  <!-- Basic Page Needs -->
  <meta charset="utf-8">
  <title>Interactive Vimeo</title>

  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Boostrap  -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- Customized CSS -->
  <style type="text/css">
.Container {
  width: 100%;
  height: auto;
}

.videoArea {
	position: relative;
  display: inline-flex;
}

/* Buttons */
.playButton {
	background-color: rgba(40, 169, 220, 0);
	width: 100%;
	height: 100%;
  position: absolute;  /* important, make the videoArea relative, and the box absolute so they are overlapped */
	top:  0px;
	left: 0px;
	pointer-events: auto;
	cursor: pointer;
	z-index: 20;
}

.shopButton {
  background-color: rgba(190, 19, 22, 0);
  width: 100%;
  height: 100%;
  position: absolute;  /* important, make the videoArea relative, and the box absolute so they are overlapped */
  top:  0px;
  left: 0px;
  pointer-events: auto;
  cursor: pointer;
  z-index: 20;
}

.loader1 {
  position: absolute;
  display: none;
  z-index: 30;
  cursor: pointer;
}

button {
  /* transform: scale(0.65); */
  background-color: black;
  color: white !important;
  border-radius: 0 !important;
}

/* Carousel Font */
h5, h4, p {
  position: absolute;
  width: 50%;
  margin-left: 50%;
}

h4 {
  font-size: 3.5vw;
  margin-top: 5%;
}

h5 {
  border-radius: 10%;
  background-color: #c3ddf4;
  font-size: 3.0vw;
  color: rgba(0, 0, 0, 0.644);
  font-weight: bold;
  max-width: fit-content;
  margin-top: 17%;
}

p {
  /* transform: scale(0.7); */
  font-size: 2.5vw;
  margin-top: 21%
}
/* Mobile Carousel */
@media screen and (max-width: 600px){
  p {
    font-size:2.5vw;
  }
  .btn-carousel {
    transform: scale(0.65);
    margin-left: 45%;
  }
  .btn-shop{
    position: absolute;
    margin-left: 45%;
    margin-top: 35.5%;
  }
  .btn-back{
    position: absolute;
    margin-left: 45%;
    margin-top: 43%;
  }
}
@media screen and (min-width: 601px){
  .btn-shop{
    position: absolute;
    margin-left: 50%;
    margin-top: 35.5%;
  }
  .btn-back{
    position: absolute;
    margin-left: 50%;
    margin-top: 43%;
  }
}



/* styling Carousel */
.carousel{
  display: none;
  position: absolute;
  z-index: 40;
}
.carousel-indicators {
  display: none;
  bottom: 5px;
}
ol.carousel-indicators li, ol.carousel-indicators li.active {
  /* width: 5px;
  height: 5px; */
  transform: scale(0.6);
}

/* Carousel Button */
.btn-carousel{
  font-size: 3vw;
  /* height: 8vh; */
}
.select-carousel{
  font-size: 3vw;
  color:white;
  background-color: black;
}
/* .btn-shop{
  position: absolute;
  margin-left: 50%;
  margin-top: 35.5%;
}
.btn-back{
  position: absolute;
  margin-left: 50%;
  margin-top: 43%;
} */

/* loading screen */
.loading{
  display: none;
  position: absolute;
  background-color: rgba(71, 71, 71, 0.5);
  width: 100%;
  height: 100%;
  top:  0px;
  left: 0px;
  pointer-events: auto;
  z-index: 30;
}

/* Jump button */
.jumpToButton{
  color: whitesmoke;
  text-shadow: 1px 1px 2px black;
  font-size: 2.5vw;
  /* transform: scale(0.6); */
  display: none;
	background-color: rgba(91, 172, 37, 0);
	width: 12%;
	height: 13%;
	position: absolute; /* important, make the videoArea relative, and the box absolute so they are overlapped */
	pointer-events: auto;
	cursor: pointer;
	z-index: 30;
}
.jumpToButton:hover {
  text-decoration:underline;
}

.jumpToRipple {
  cursor: pointer;
  display: none;
	position: absolute;
  z-index: 30;
}

/* Click Effects */
div.clickEffect{
  position:fixed;
  box-sizing:border-box;
  border-style:solid;
  border-color:#000000;
  border-radius:50%;
  animation:clickEffect 0.4s ease-out;
  z-index:99999;
}
@keyframes clickEffect{
  0%{
    opacity:1;
    width:0.5em; height:0.5em;
    margin:-0.25em;
    border-width:0.5rem;
  }
  100%{
    opacity:0.2;
    width:15em; height:15em;
    margin:-7.5em;
    border-width:0.03rem;
  }
}

@keyframes circle {
  from {
    transform: scale(0)
  }
  to {
    transform: scale(1)
  }
}

/* Loader Circle */
.circle {
  margin: 0 auto;
  width: 5vw;
  height: 5vw;
  border: 0.2vw solid rgba(241, 234, 234, 0.836);
  border-radius: 50%;
  position: absolute;
  top: 67%;
  left: 48%;
}
.one {
  animation: circle 4s infinite linear;
}

.two {
  animation: circle 3s infinite linear;
}

.three {
  animation: circle 2s infinite linear;
}
    </style>

  <!-- Click Effect -->
  <script type="text/javascript">
        function clickEffect(e){
          var d=document.createElement("div");
          d.className="clickEffect";
          d.style.top=e.clientY+"px";d.style.left=e.clientX+"px";
          document.body.appendChild(d);
          d.addEventListener('animationend',function(){d.parentElement.removeChild(d);}.bind(this));
        }
        document.addEventListener('click',clickEffect);
    </script>
    
<div class="Container">
  <div class="embed-responsive embed-responsive-16by9">
    <div id="myVideo" class="videoArea embed-responsive-item" 
                          data-vimeo-id="494338777"
                          data-vimeo-muted="false"
                          data-vimeo-controls="false"
                          data-vimeo-background="true"
                          data-vimeo-loop="true">
                               <!-- how to get play button to hide after 30 second -->
                               <!-- how to show a loader after play button is clicked -->
                               <div class="playButton" id="play" onclick="playDisplayPart()"></div>
                                <!-- shop button function in JQuery -->
                               <div class="shopButton" id="shop"></div> 
                               <div class="loader1" id="loader1" style="top:69%; left: 47%;" onclick="playDisplayPart()">
                                   <div class="circle one"></div>
                                   <div class="circle two"></div>
                                   <div class="circle three"></div>
                                </div>
                                <!-- Button for jump between Products -->
                                <div class="jumpToRipple" id="jumpRipple" onclick="privousProduct()" style="top:9.5%; left:16%; transform: scale(0.6);">
                                  <div class="circle one"></div><div class="circle two"></div><div class="circle three"></div>
                                </div>
                                <div class = "jumpToButton" id="previous" style="top: 7.0%; left: 4%;" onclick="previousProduct()">Προηγούμενο</div>
  
                                <div class="jumpToRipple" id="jumpRipple" onclick="nextProduct()" style="top:9.5%; left:88%; transform: scale(0.6);">
                                  <div class="circle one"></div><div class="circle two"></div><div class="circle three"></div>
                                </div>
                                <div class = "jumpToButton" id="next" style="top: 7.0%;left: 82%;" onclick="nextProduct()">Επόμενο</div>
                                <!-- loading screen -->
                                <div id="loading" class="loading">
                                  <p style="color: white; margin-left: 45%; margin-top: 20%;">Loading...</p>
                                </div>
                               <!-- pop up slideshow experience -->
                              
                                <div id="Carousel" class="carousel slide" data-ride="carousel" data-interval="false">
                                  <!-- Indicators -->
                                  <ol class="carousel-indicators">
                                    <li data-target="#Carousel" data-slide-to="0" class="active"></li>
                                    <li data-target="#Carousel" data-slide-to="1"></li>
                                    <li data-target="#Carousel" data-slide-to="2"></li>
                                    <li data-target="#Carousel" data-slide-to="3"></li>
                                    <li data-target="#Carousel" data-slide-to="4"></li>
                                    <li data-target="#Carousel" data-slide-to="5"></li>
                                    <li data-target="#Carousel" data-slide-to="6"></li>
                                    <li data-target="#Carousel" data-slide-to="7"></li>
                                  </ol>

                                  <!-- Wrapper for slides -->
                                  <div class="carousel-inner" style="position: relative">
                                    <!-- 0 PVC Boots-->
                                    <div class="item active">
                                      <h4>Αδιάβροχη γαλότσα εργασίας Dunlop κνήμης (κοντή)</h4>
                                      <h5>€10,4</h5>
                                      <p>Αδιάβροχες γαλότσες υψηλής ποιότητας για απαιτητικές αγροτικές εργασίες</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_c15c06460ccd43b786a2952d971173cc~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      <p style="top:16%;">select the size</p>
                                      <select class="select-carousel" name="Size" style="position:absolute;top: 53%; left : 70%">
                                        <option value="na" selected="selected">- select - &nbsp&nbsp </option>
                                        <option value ="Small">Small</option>
                                        <option value ="Medium">Medium</option>
                                        <option value ="Large">Large</option>
                                      </select>
                                      <button type="button" class="btn btn-dark btn-carousel btn-shop" id="0c223e10-46e9-8e13-9749-b82897897cef" onclick="addToCart()">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                    <!-- 1 Chainsaw -->
                                    <div class="item">
                                      <h4>Αλυσοπρίονο βενζίνης Einhell 2χρονο - με αλυσίδα & λάμα Oregon 35cm</h4>
                                      <h5>€107,55</h5>
                                      <p>Με αντικραδασμικό σύστημα & φρένο αλυσίδας</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_232dfd04a3f342a585722426fc4fa144~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      <button type="button" class="btn btn-dark btn-carousel btn-shop" id="a1f9f494-6496-d6a2-8075-4d77a4b3f504" onclick="addToCart()">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                    <!-- 2 Angle Grinder-->
                                    <div class="item">
                                      <h4>Ηλεκτρικός γωνιακός τροχός Einhell διαμέτρου 125mm 850 Watt</h4>
                                      <h5>€31,95</h5>
                                      <p>Με 2 χρόνια εγγύηση</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_16cf670264c044b782e1d7e91efd3359~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      <button type="button" class="btn btn-dark btn-carousel btn-shop">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                    <!-- 3 Luricant -->
                                    <div class="item">
                                      <h4>Λιπαντικό - αντισκωριακό γενικής χρήσης Q20</h4>
                                      <h5>€3,5</h5>
                                      <p>Προλαμβάνει τη σκουριά & απομακρύνει την υγρασία</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_1fa2cfe5f929497a8f7a40c5c4ef4237~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      <button type="button" class="btn btn-dark btn-carousel btn-shop">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                    <!-- 4 axes -->
                                    <div class="item">
                                      <h4>Επαγγελματική τσεκουροβαριά Harden με λαβή fiberglass 90cm</h4>
                                      <h5>€22,5</h5>
                                      <p>Ιδανική για σχίσιμο των ξύλων</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_6e94f9173ca04de492d9f533810f056a~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      <button type="button" class="btn btn-dark btn-carousel btn-shop">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                    <!-- 5 warm air generator-->
                                    <div class="item">
                                      <h4>Γεννήτρια παραγωγής θερμού αέρα HGG Einhell</h4>
                                      <h5>€98,5</h5>
                                      <p>Με βαλβίδα υγραερίου & ανοξείδωτο περίβλημα</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_d864d4d9a6624973a404ca98d49fa8da~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      <button type="button" class="btn btn-dark btn-carousel btn-shop">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                    <!-- 6 Scale -->
                                    <div class="item">
                                      <h4>Επαγγελματική ζυγαριά δαπέδου - πλάστιγγα 150kg</h4>
                                      <h5>€47,9</h5>
                                      <p>Λειτουργεί με ρεύμα & με μπαταρία</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_ec67757a9d8749969eb41fbfcad140d6~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      7<button type="button" class="btn btn-dark btn-carousel btn-shop">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                    <!-- 7 Hammer Drill -->
                                    <div class="item">
                                      <h4>Ηλεκτρικό κρουστικό δράπανο Einhell TC-ID/1E 720Watt</h4>
                                      <h5>€33,9</h5>
                                      <p>Δύο χρόνια εγγύηση</p>
                                      <img src="https://static.wixstatic.com/media/d0505b_b033f6f52abb4f7cbb16b32c489726cc~mv2.png" id="shopImg" 
                                      style="width: 50%; position: absolute;">
                                      <button type="button" class="btn btn-dark btn-carousel btn-shop">Προσθήκη στο Καλάθι</button>
                                      <button type="button" class="btn btn-dark btn-carousel btn-back" onclick="playAgain()">Επιστροφή στο Βίντεο</button>
                                      <img src="https://static.wixstatic.com/media/d0505b_d4ea305af5f2450c8eda5c5890d83541~mv2.png" alt="" style="width:100%;">
                                    </div>
                                  <!-- Left and right controls -->
                                  <a class="left carousel-control" href="#Carousel" data-slide="prev">
                                    <span class="glyphicon glyphicon-chevron-left"></span>
                                    <span class="sr-only">Previous</span>
                                  </a>
                                  <a class="right carousel-control" href="#Carousel" data-slide="next">
                                    <span class="glyphicon glyphicon-chevron-right"></span>
                                    <span class="sr-only">Next</span>
                                  </a>
                                </div>
                                
                          </div>
      </div>
  
        
      <!-- Vimeo player script and SDK import -->
      <script src="https://player.vimeo.com/api/player.js"></script>
      <script>
        //player setup
        var options = {
          id: "494338777",
          url: "https://vimeo.com/494338777"
        };
        var player = new Vimeo.Player('myVideo', options);
        player.setVolume(0);
        document.getElementById("loader1").style.display = "none"; 
        document.getElementById("play").style.display = "none"; 
        document.getElementById("shop").style.display = "none";
  
        // var onPlay = function(data) {
        // };
  
        // player.on('bufferend', onPlay);
  
        player.on('play', function() {
          // console.log('Played the video');
          document.getElementById("loader1").style.display = "inline"; 
          document.getElementById("play").style.display = "inline";
          document.getElementById("shop").style.display = "none";
        });
        
        var jumpSecond =  new Array(34, 37, 40, 43, 46, 49, 52, 55);
        var playButtonClicked = false;
        var prevButtonClicked = false;
        var nextButtonClicked = false;
        var currentAt = -1;
        
        //play button
        function playDisplayPart() {
          playButtonClicked = true;
          document.getElementById("loading").style.display = "inline";
          // console.log("show loading", playButtonClicked)
          player.setCurrentTime(jumpSecond[0]);
          document.getElementById("play").style.display = "none";
        }
  
        var jumpToShopping =  function(data){
          if(data.seconds >= jumpSecond[0] && playButtonClicked == true){
            // console.log("reached jump point")
            document.getElementById("loading").style.display = "none";
            // console.log("hide loading")
            playButtonClicked = false;
            showAllJumpButton();
            document.getElementById("shop").style.display = "inline";
          }
  
          if(data.seconds >= jumpSecond[0] && loop == true){
            // console.log("reached jump point")
            document.getElementById("loading").style.display = "none";
            // console.log("hide loading")
            loop = false;
            showAllJumpButton();
            document.getElementById("shop").style.display = "inline";
          }
        };
        player.on('timeupdate',jumpToShopping);
  
        // player.on('timeupdate', function(data){
        //   console.log(Math.round(data.seconds))
        // })
  
        // loop after ended
        var loop = false;
        var videoLength = 58;
        var reAppear = function(data){
          if(Math.round(data.seconds)>= videoLength){
            loop = true;
            player.setCurrentTime(jumpSecond[0]);
            data.seconds = jumpSecond[0];
            // document.getElementById("loading").style.display = "inline";
            // currentAt = 0;
            playDisplayPart();
          }
        }
        player.on('timeupdate', reAppear);
  
        var buttonDisplay = function(data){
          //control play button
          if(Math.round(data.seconds)>=jumpSecond[0]){
            document.getElementById("loader1").style.display = "none";
            document.getElementById("play").style.display = "none";
          }
  
          //control shop button
          if(Math.round(data.seconds)<=jumpSecond[0]){
            document.getElementById("shop").style.display = "none";
          }
          if(Math.round(data.seconds)>jumpSecond[0]){
            document.getElementById("shop").style.display = "inline";
            showAllJumpButton();
          }
        }
        player.on('timeupdate', buttonDisplay);
        
        //shop button
        //Jquery is neccesary for Carousel control
        $(document).ready(function(){
          $("#shop").click(function(){
            player.pause();
            player.getCurrentTime().then(function(seconds) {
            var index = getTimeIndex(jumpSecond, seconds);
            // currentAt = index;
            $("#Carousel").carousel(index);
            
          });
          document.getElementById("Carousel").style.display = "inline";
          hideAllJumpButton();
          })
        })

        //Επιστροφή στο Βίντεο from carousel
        function playAgain(){
          document.getElementById("Carousel").style.display = "none";
          showAllJumpButton();
          // player.setCurrentTime(jumpSecond[currentAt]);
          // document.getElementById("loading").style.display = "inline";
          player.play();
        }
     
        // jump between products
        function previousProduct(){
          player.getCurrentTime().then(function(seconds) {
            // console.log(seconds)
            prevButtonClicked = true;
            var index = getTimeIndex(jumpSecond, seconds);
            // console.log(index)
  
            if(index ==  0){
              player.setCurrentTime(jumpSecond[0]);
              // console.log("stay")
              currentAt = 0;
            }
            if(index >= 1){
              player.setCurrentTime(jumpSecond[index - 1]);
              // console.log("jump to" + (index - 1))
              currentAt = (index - 1);
            }
            document.getElementById("loading").style.display = "inline";
          });
        }
  
        function nextProduct(){
          player.getCurrentTime().then(function(seconds) {
            // console.log(seconds)
            nextButtonClicked = true;
            var index = getTimeIndex(jumpSecond, seconds);
            // console.log(index)
            if(index ==  jumpSecond.length - 1){
              player.setCurrentTime(jumpSecond[index]);
              // console.log("stay")
              currentAt = index;
            }
            else{
              player.setCurrentTime(jumpSecond[index + 1]);
              // console.log("jump to" + (index + 1))
              currentAt = index + 1;
            }
            document.getElementById("loading").style.display = "inline";
          });
        }
        
        function listenForJump(data){
          if(prevButtonClicked == true && data.seconds > jumpSecond[currentAt]){
            document.getElementById("loading").style.display = "none";
            prevButtonClicked = false;
          }
          if(nextButtonClicked == true && data.seconds <= jumpSecond[currentAt]){
            document.getElementById("loading").style.display = "none";
            prevButtonClicked = false;
          }
          if(loop == true && data.seconds == jumpSecond[0]){
            document.getElementById("loading").style.display = "none";
            loop = false;
          }
        }
        player.on('timeupdate', listenForJump);
  
        function getTimeIndex(jumpSecond, time){
          var timeIndex = -1;
          for(var index in jumpSecond){
            if(jumpSecond[index] > time){
              return index - 1;
            }
            if(index == jumpSecond.length - 1){
              return parseInt(index);
            }
          }
          return timeIndex;
        }
  
        //control jump button display
        function hideAllJumpButton(){
          var allJump = document.getElementsByClassName('jumpToButton');
          for (var i = 0; i < allJump.length; i++) {
            allJump[i].style.display = 'none';
          }
          var allRipple = document.getElementsByClassName('jumpToRipple');
          for (var i = 0; i < allRipple.length; i++) {
            allRipple[i].style.display = 'none';
          }
        }

        function showAllJumpButton(){
          var allJump = document.getElementsByClassName('jumpToButton');
          for (var i = 0; i < allJump.length; i++) {
            allJump[i].style.display = 'inline';
          }
          // var allRipple = document.getElementsByClassName('jumpToRipple');
          // for (var i = 0; i < allRipple.length; i++) {
          //   allRipple[i].style.display = 'inline';
          // }
        }

        //Add product to cart
        function addToCart() {
          let product_id = event.srcElement.id;
          let parent = event.srcElement.parentElement;
          let data = {};
          if(parent.getElementsByTagName("select")){
            let select = parent.getElementsByTagName("select")[0];
            let choices =  {};
            choices[select.name] = select.value
            data["choices"] = choices
          }
          data["productId"] = product_id;
          data = JSON.stringify(data);
          console.dir(data);
          window.parent.postMessage(data, "*");
      }

      </script>
       
  
  </div>
</div>
